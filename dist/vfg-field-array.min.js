/**
 * Copyright 2017 Gwenael Pluchon
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue-form-generator"),require("vuedraggable"),require("lodash.foreach")):"function"==typeof define&&define.amd?define(["exports","vue-form-generator","vuedraggable","lodash.foreach"],t):t(e["vfg-field-array"]={},e.vueFormGenerator,e.draggable,e.lodashForeach)}(this,function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return e(t={exports:{}},t.exports),t.exports}t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r;var a=Math.ceil,u=Math.floor,s=function(e){return isNaN(e=+e)?0:(e>0?u:a)(e)},c=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},l=i(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),f=i(function(e){var t=e.exports={version:"2.5.5"};"number"==typeof __e&&(__e=t)}),m=(f.version,function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}),h=function(e,t,n){if(m(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},d=function(e){return"object"==typeof e?null!==e:"function"==typeof e},v=function(e){if(!d(e))throw TypeError(e+" is not an object!");return e},p=function(e){try{return!!e()}catch(e){return!0}},y=!p(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),g=l.document,_=d(g)&&d(g.createElement),b=function(e){return _?g.createElement(e):{}},w=!y&&!p(function(){return 7!=Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a}),E=Object.defineProperty,O={f:y?Object.defineProperty:function(e,t,n){if(v(e),t=function(e,t){if(!d(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!d(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!d(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!d(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}(t,!0),v(n),w)try{return E(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},L=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},S=y?function(e,t,n){return O.f(e,t,L(1,n))}:function(e,t,n){return e[t]=n,e},x={}.hasOwnProperty,j=function(e,t){return x.call(e,t)},P=function(e,t,n){var r,o,i,a=e&P.F,u=e&P.G,s=e&P.S,c=e&P.P,m=e&P.B,d=e&P.W,v=u?f:f[t]||(f[t]={}),p=v.prototype,y=u?l:s?l[t]:(l[t]||{}).prototype;for(r in u&&(n=t),n)(o=!a&&y&&void 0!==y[r])&&j(v,r)||(i=o?y[r]:n[r],v[r]=u&&"function"!=typeof y[r]?n[r]:m&&o?h(i,l):d&&y[r]==i?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(i):c&&"function"==typeof i?h(Function.call,i):i,c&&((v.virtual||(v.virtual={}))[r]=i,e&P.R&&p&&!p[r]&&S(p,r,i)))};P.F=1,P.G=2,P.S=4,P.P=8,P.B=16,P.W=32,P.U=64,P.R=128;var B,C=P,M=S,T={},I={}.toString,A=function(e){return I.call(e).slice(8,-1)},F=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==A(e)?e.split(""):Object(e)},k=function(e){return F(c(e))},N=Math.min,U=function(e){return e>0?N(s(e),9007199254740991):0},D=Math.max,R=Math.min,V=l["__core-js_shared__"]||(l["__core-js_shared__"]={}),G=function(e){return V[e]||(V[e]={})},H=0,q=Math.random(),W=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++H+q).toString(36))},$=G("keys"),J=function(e){return $[e]||($[e]=W(e))},z=(B=!1,function(e,t,n){var r,o=k(e),i=U(o.length),a=function(e,t){return(e=s(e))<0?D(e+t,0):R(e,t)}(n,i);if(B&&t!=t){for(;i>a;)if((r=o[a++])!=r)return!0}else for(;i>a;a++)if((B||a in o)&&o[a]===t)return B||a||0;return!B&&-1}),K=J("IE_PROTO"),Q="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),X=Object.keys||function(e){return function(e,t){var n,r=k(e),o=0,i=[];for(n in r)n!=K&&j(r,n)&&i.push(n);for(;t.length>o;)j(r,n=t[o++])&&(~z(i,n)||i.push(n));return i}(e,Q)},Y=y?Object.defineProperties:function(e,t){v(e);for(var n,r=X(t),o=r.length,i=0;o>i;)O.f(e,n=r[i++],t[n]);return e},Z=l.document,ee=Z&&Z.documentElement,te=J("IE_PROTO"),ne=function(){},re=function(){var e,t=b("iframe"),n=Q.length;for(t.style.display="none",ee.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),re=e.F;n--;)delete re.prototype[Q[n]];return re()},oe=Object.create||function(e,t){var n;return null!==e?(ne.prototype=v(e),n=new ne,ne.prototype=null,n[te]=e):n=re(),void 0===t?n:Y(n,t)},ie=i(function(e){var t=G("wks"),n=l.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:W)("Symbol."+e))}).store=t}),ae=O.f,ue=ie("toStringTag"),se=function(e,t,n){e&&!j(e=n?e:e.prototype,ue)&&ae(e,ue,{configurable:!0,value:t})},ce={};S(ce,ie("iterator"),function(){return this});var le,fe=function(e,t,n){e.prototype=oe(ce,{next:L(1,n)}),se(e,t+" Iterator")},me=function(e){return Object(c(e))},he=J("IE_PROTO"),de=Object.prototype,ve=Object.getPrototypeOf||function(e){return e=me(e),j(e,he)?e[he]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?de:null},pe=ie("iterator"),ye=!([].keys&&"next"in[].keys()),ge=function(){return this},_e=function(e,t,n,r,o,i,a){fe(n,t,r);var u,s,c,l=function(e){if(!ye&&e in d)return d[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},f=t+" Iterator",m="values"==o,h=!1,d=e.prototype,v=d[pe]||d["@@iterator"]||o&&d[o],p=v||l(o),y=o?m?l("entries"):p:void 0,g="Array"==t&&d.entries||v;if(g&&(c=ve(g.call(new e)))!==Object.prototype&&c.next&&se(c,f,!0),m&&v&&"values"!==v.name&&(h=!0,p=function(){return v.call(this)}),a&&(ye||h||!d[pe])&&S(d,pe,p),T[t]=p,T[f]=ge,o)if(u={values:m?p:l("values"),keys:i?p:l("keys"),entries:y},a)for(s in u)s in d||M(d,s,u[s]);else C(C.P+C.F*(ye||h),t,u);return u},be=(le=!0,function(e,t){var n,r,o=String(c(e)),i=s(t),a=o.length;return i<0||i>=a?le?"":void 0:(n=o.charCodeAt(i))<55296||n>56319||i+1===a||(r=o.charCodeAt(i+1))<56320||r>57343?le?o.charAt(i):n:le?o.slice(i,i+2):r-56320+(n-55296<<10)+65536});_e(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=be(t,n),this._i+=e.length,{value:e,done:!1})});var we=function(e,t){return{value:t,done:!!e}};_e(Array,"Array",function(e,t){this._t=k(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,we(1)):we(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values");T.Arguments=T.Array;for(var Ee=ie("toStringTag"),Oe="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Le=0;Le<Oe.length;Le++){var Se=Oe[Le],xe=l[Se],je=xe&&xe.prototype;je&&!je[Ee]&&S(je,Ee,Se),T[Se]=T.Array}var Pe,Be,Ce,Me=ie("toStringTag"),Te="Arguments"==A(function(){return arguments}()),Ie=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Me))?n:Te?A(t):"Object"==(r=A(t))&&"function"==typeof t.callee?"Arguments":r},Ae=function(e,t,n,r){try{return r?t(v(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&v(o.call(e)),t}},Fe=ie("iterator"),ke=Array.prototype,Ne=function(e){return void 0!==e&&(T.Array===e||ke[Fe]===e)},Ue=ie("iterator"),De=f.getIteratorMethod=function(e){if(void 0!=e)return e[Ue]||e["@@iterator"]||T[Ie(e)]},Re=i(function(e){var t={},n={},r=e.exports=function(e,r,o,i,a){var u,s,c,l,f=a?function(){return e}:De(e),m=h(o,i,r?2:1),d=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(Ne(f)){for(u=U(e.length);u>d;d++)if((l=r?m(v(s=e[d])[0],s[1]):m(e[d]))===t||l===n)return l}else for(c=f.call(e);!(s=c.next()).done;)if((l=Ae(c,m,s.value,r))===t||l===n)return l};r.BREAK=t,r.RETURN=n}),Ve=ie("species"),Ge=function(e,t){var n,r=v(e).constructor;return void 0===r||void 0==(n=v(r)[Ve])?t:m(n)},He=l.process,qe=l.setImmediate,We=l.clearImmediate,$e=l.MessageChannel,Je=l.Dispatch,ze=0,Ke={},Qe=function(){var e=+this;if(Ke.hasOwnProperty(e)){var t=Ke[e];delete Ke[e],t()}},Xe=function(e){Qe.call(e.data)};qe&&We||(qe=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Ke[++ze]=function(){!function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}e.apply(n,t)}("function"==typeof e?e:Function(e),t)},Pe(ze),ze},We=function(e){delete Ke[e]},"process"==A(He)?Pe=function(e){He.nextTick(h(Qe,e,1))}:Je&&Je.now?Pe=function(e){Je.now(h(Qe,e,1))}:$e?(Ce=(Be=new $e).port2,Be.port1.onmessage=Xe,Pe=h(Ce.postMessage,Ce,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(Pe=function(e){l.postMessage(e+"","*")},l.addEventListener("message",Xe,!1)):Pe="onreadystatechange"in b("script")?function(e){ee.appendChild(b("script")).onreadystatechange=function(){ee.removeChild(this),Qe.call(e)}}:function(e){setTimeout(h(Qe,e,1),0)});var Ye={set:qe,clear:We},Ze=Ye.set,et=l.MutationObserver||l.WebKitMutationObserver,tt=l.process,nt=l.Promise,rt="process"==A(tt);var ot={f:function(e){return new function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=m(t),this.reject=m(n)}(e)}},it=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},at=function(e,t){if(v(e),d(t)&&t.constructor===e)return t;var n=ot.f(e);return(0,n.resolve)(t),n.promise},ut=ie("species"),st=ie("iterator"),ct=!1;try{[7][st]().return=function(){ct=!0}}catch(e){}var lt,ft,mt,ht,dt,vt,pt=function(e,t){if(!t&&!ct)return!1;var n=!1;try{var r=[7],o=r[st]();o.next=function(){return{done:n=!0}},r[st]=function(){return o},e(r)}catch(e){}return n},yt=Ye.set,gt=function(){var e,t,n,r=function(){var r,o;for(rt&&(r=tt.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(rt)n=function(){tt.nextTick(r)};else if(!et||l.navigator&&l.navigator.standalone)if(nt&&nt.resolve){var o=nt.resolve();n=function(){o.then(r)}}else n=function(){Ze.call(l,r)};else{var i=!0,a=document.createTextNode("");new et(r).observe(a,{characterData:!0}),n=function(){a.data=i=!i}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}(),_t=l.TypeError,bt=l.process,wt=l.Promise,Et="process"==Ie(bt),Ot=function(){},Lt=ft=ot.f,St=!!function(){try{var e=wt.resolve(1),t=(e.constructor={})[ie("species")]=function(e){e(Ot,Ot)};return(Et||"function"==typeof PromiseRejectionEvent)&&e.then(Ot)instanceof t}catch(e){}}(),xt=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},jt=function(e,t){if(!e._n){e._n=!0;var n=e._c;gt(function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a,u=o?t.ok:t.fail,s=t.resolve,c=t.reject,l=t.domain;try{u?(o||(2==e._h&&Ct(e),e._h=1),!0===u?n=r:(l&&l.enter(),n=u(r),l&&(l.exit(),a=!0)),n===t.promise?c(_t("Promise-chain cycle")):(i=xt(n))?i.call(n,s,c):s(n)):c(r)}catch(e){l&&!a&&l.exit(),c(e)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&Pt(e)})}},Pt=function(e){yt.call(l,function(){var t,n,r,o=e._v,i=Bt(e);if(i&&(t=it(function(){Et?bt.emit("unhandledRejection",o,e):(n=l.onunhandledrejection)?n({promise:e,reason:o}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=Et||Bt(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},Bt=function(e){return 1!==e._h&&0===(e._a||e._c).length},Ct=function(e){yt.call(l,function(){var t;Et?bt.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},Mt=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),jt(t,!0))},Tt=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw _t("Promise can't be resolved itself");(t=xt(e))?gt(function(){var r={_w:n,_d:!1};try{t.call(e,h(Tt,r,1),h(Mt,r,1))}catch(e){Mt.call(r,e)}}):(n._v=e,n._s=1,jt(n,!1))}catch(e){Mt.call({_w:n,_d:!1},e)}}};St||(wt=function(e){!function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!")}(this,wt,"Promise","_h"),m(e),lt.call(this);try{e(h(Tt,this,1),h(Mt,this,1))}catch(e){Mt.call(this,e)}},(lt=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:S(e,r,t[r]);return e}(wt.prototype,{then:function(e,t){var n=Lt(Ge(this,wt));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=Et?bt.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&jt(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),mt=function(){var e=new lt;this.promise=e,this.resolve=h(Tt,e,1),this.reject=h(Mt,e,1)},ot.f=Lt=function(e){return e===wt||e===ht?new mt(e):ft(e)}),C(C.G+C.W+C.F*!St,{Promise:wt}),se(wt,"Promise"),vt="function"==typeof f[dt="Promise"]?f[dt]:l[dt],y&&vt&&!vt[ut]&&O.f(vt,ut,{configurable:!0,get:function(){return this}}),ht=f.Promise,C(C.S+C.F*!St,"Promise",{reject:function(e){var t=Lt(this);return(0,t.reject)(e),t.promise}}),C(C.S+!0*C.F,"Promise",{resolve:function(e){return at(this===ht?wt:this,e)}}),C(C.S+C.F*!(St&&pt(function(e){wt.all(e).catch(Ot)})),"Promise",{all:function(e){var t=this,n=Lt(t),r=n.resolve,o=n.reject,i=it(function(){var n=[],i=0,a=1;Re(e,!1,function(e){var u=i++,s=!1;n.push(void 0),a++,t.resolve(e).then(function(e){s||(s=!0,n[u]=e,--a||r(n))},o)}),--a||r(n)});return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=Lt(t),r=n.reject,o=it(function(){Re(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}}),C(C.P+C.R,"Promise",{finally:function(e){var t=Ge(this,f.Promise||l.Promise),n="function"==typeof e;return this.then(n?function(n){return at(t,e()).then(function(){return n})}:e,n?function(n){return at(t,e()).then(function(){throw n})}:e)}}),C(C.S,"Promise",{try:function(e){var t=ot.f(this),n=it(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}});var It=f.Promise,At=o(i(function(e){e.exports={default:It,__esModule:!0}})),Ft=f.JSON||(f.JSON={stringify:JSON.stringify}),kt=function(e){return Ft.stringify.apply(Ft,arguments)},Nt=o(i(function(e){e.exports={default:kt,__esModule:!0}})),Ut={f:Object.getOwnPropertySymbols},Dt={f:{}.propertyIsEnumerable},Rt=Object.assign,Vt=!Rt||p(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=Rt({},e)[n]||Object.keys(Rt({},t)).join("")!=r})?function(e,t){for(var n=me(e),r=arguments.length,o=1,i=Ut.f,a=Dt.f;r>o;)for(var u,s=F(arguments[o++]),c=i?X(s).concat(i(s)):X(s),l=c.length,f=0;l>f;)a.call(s,u=c[f++])&&(n[u]=s[u]);return n}:Rt;C(C.S+C.F,"Object",{assign:Vt});var Gt=f.Object.assign,Ht=i(function(e){e.exports={default:Gt,__esModule:!0}});o(Ht);var qt=o(i(function(e,t){t.__esModule=!0;var n,r=(n=Ht)&&n.__esModule?n:{default:n};t.default=r.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}})),Wt=function(e,t,n){t in e?O.f(e,t,L(0,n)):e[t]=n};C(C.S+C.F*!pt(function(e){}),"Array",{from:function(e){var t,n,r,o,i=me(e),a="function"==typeof this?this:Array,u=arguments.length,s=u>1?arguments[1]:void 0,c=void 0!==s,l=0,f=De(i);if(c&&(s=h(s,u>2?arguments[2]:void 0,2)),void 0==f||a==Array&&Ne(f))for(n=new a(t=U(i.length));t>l;l++)Wt(n,l,c?s(i[l],l):i[l]);else for(o=f.call(i),n=new a;!(r=o.next()).done;l++)Wt(n,l,c?Ae(o,s,[r.value,l],!0):r.value);return n.length=l,n}});var $t=f.Array.from,Jt=i(function(e){e.exports={default:$t,__esModule:!0}});o(Jt);var zt=o(i(function(e,t){t.__esModule=!0;var n,r=(n=Jt)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,r.default)(e)}}));!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var Kt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.schema?n("div",{directives:[{name:"attributes",rawName:"v-attributes",value:e.schema.attributes,expression:"schema.attributes"}],class:e.schema.fieldClasses,attrs:{id:e.fieldId}},[n(e.schema.draggable?"draggable":"span",{tag:"component",staticClass:"wrap",attrs:{handle:".array-item-handle"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.value,function(t,r){return n("div",{class:e.schema.itemContainerClasses},[e.schema.items&&e.schema.itemContainerComponent?n("span",[n(e.schema.itemContainerComponent,{tag:"component",attrs:{model:t,index:r,id:e.fieldId+"c"+r,parentId:e.fieldId,removeElementButtonLabel:e.removeElementButtonLabel,moveElementUpButtonLabel:e.moveElementUpButtonLabel,moveElementDownButtonLabel:e.moveElementDownButtonLabel,itemContainerHeader:e.schema.itemContainerHeader,schema:e.generateSchema(e.value,e.schema.items,r)},on:{moveItemUp:function(t){e.moveElementUp(r)},moveItemDown:function(t){e.moveElementDown(r)},removeItem:function(t){e.removeElement(r)}}},[n(e.getFieldType(e.schema.items),{tag:"component",attrs:{model:t,schema:e.generateSchema(e.value,e.schema.items,r),formOptions:e.formOptions},on:{"model-updated":e.modelUpdated}})],1)],1):e.schema.items?n("span",[n(e.getFieldType(e.schema.items),{tag:"component",class:{error:e.schema.errors&&e.schema.errors[r]},attrs:{model:t,schema:e.generateSchema(e.value,e.schema.items,r),formOptions:e.formOptions},on:{"model-updated":e.modelUpdated}}),e._v(" "),e.schema.errors&&e.schema.errors[r]?n("div",{staticClass:"errors help-block"},[n("span",[e._v(e._s(e.schema.errors[r]))])]):e._e()],1):e.schema.itemContainerComponent?n("span",[n(e.schema.itemContainerComponent,{tag:"component",attrs:{model:t,index:r,id:e.fieldId+"c"+r,parentId:e.fieldId,removeElementButtonLabel:e.removeElementButtonLabel,moveElementUpButtonLabel:e.moveElementUpButtonLabel,moveElementDownButtonLabel:e.moveElementDownButtonLabel,itemContainerHeader:e.schema.itemContainerHeader,schema:e.generateSchema(e.value,e.schema.items,r)},on:{moveItemUp:function(t){e.moveElementUp(r)},moveItemDown:function(t){e.moveElementDown(r)},removeItem:function(t){e.removeElement(r)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value[r],expression:"value[index]"}],class:e.schema.itemFieldClasses,attrs:{type:"text",name:e.generateInputName(r),id:e.fieldId+r},domProps:{value:e.value[r]},on:{input:function(t){t.target.composing||e.$set(e.value,r,t.target.value)}}}),e._v(" "),e.schema.showRemoveButton?n("input",{attrs:{type:"button",value:e.removeElementButtonLabel},on:{click:function(t){e.removeElement(r)}}}):e._e()])],1):n("input",{directives:[{name:"model",rawName:"v-model",value:e.value[r],expression:"value[index]"}],class:e.schema.itemFieldClasses,attrs:{type:"text",name:e.generateInputName(r),id:e.fieldId+r},domProps:{value:e.value[r]},on:{input:function(t){t.target.composing||e.$set(e.value,r,t.target.value)}}}),e._v(" "),e.schema.showModeElementUpButton?n("input",{class:e.schema.moveElementUpButtonClasses,attrs:{type:"button",value:e.moveElementUpButtonLabel},on:{click:function(t){e.moveElementUp(r)}}}):e._e(),e._v(" "),e.schema.showModeElementDownButton?n("input",{class:e.schema.moveElementDownButtonClasses,attrs:{type:"button",value:e.moveElementDownButtonLabel},on:{click:function(t){e.moveElementDown(r)}}}):e._e(),e._v(" "),e.schema.showRemoveButton?n("input",{class:e.schema.removeElementButtonClasses,attrs:{type:"button",value:e.removeElementButtonLabel},on:{click:function(t){e.removeElement(r)}}}):e._e()])})),e._v(" "),e.schema.showEmptyComponentAtBottom?n(e.getFieldType(e.schema.items),{tag:"component",attrs:{model:e.newItem,schema:e.generateSchema(this,e.schema.items,"newItem"),formOptions:e.formOptions},on:{"model-updated":e.emptyComponentModelUpdated}}):e._e(),e._v(" "),e.schema.hideAddButton?e._e():n("input",{class:e.schema.newElementButtonLabelClasses,attrs:{type:"button",value:e.newElementButtonLabel},on:{click:e.newElement}})],1):e._e()},staticRenderFns:[],mixins:[t.abstractField],components:{draggable:n},data:function(){return{newItem:void 0}},computed:{fieldId:function(){return this.getFieldID(this.schema)},newElementButtonLabel:function(){return void 0!==this.schema.newElementButtonLabel?this.schema.newElementButtonLabel:"+ New"},removeElementButtonLabel:function(){return void 0!==this.schema.removeElementButtonLabel?this.schema.removeElementButtonLabel:"x"},moveElementUpButtonLabel:function(){return void 0!==this.schema.moveElementUpButtonLabel?(removeElementButtonLabel(),this.schema.moveElementUpButtonLabel):"↑"},moveElementDownButtonLabel:function(){return void 0!==this.schema.moveElementDownButtonLabel?this.schema.moveElementDownButtonLabel:"↓"}},watch:{value:{handler:function(e){if(this.schema.removeUndefinedValues&&void 0!==e&&(-1!==e.indexOf(void 0)||-1!==e.indexOf(null))){var t=[].concat(zt(e));for(console.log(t.indexOf(void 0),t.indexOf(null));-1!==t.indexOf(void 0);)t.splice(t.indexOf(void 0),1);for(;-1!==t.indexOf(null);)t.splice(t.indexOf(null),1);this.value=t}},deep:!0}},methods:{generateSchema:function(e,t,n){var r=qt({},t);return void 0!==this.schema.inputName&&(r.inputName=this.schema.inputName+"["+n+"]"),r.id=this.fieldId+n,qt({},r,{set:function(t,r){e[n]=r},get:function(t){return e[n]}})},generateInputName:function(e){return void 0===this.schema.inputName?null:this.schema.inputName+"["+e+"]"},emptyComponentModelUpdated:function(e){this.value||(this.value=[]),this.value.push(e),this.newItem=void 0},newElement:function(){var e=this.value,t=void 0;e&&e.push||(e=[]),this.schema.items&&this.schema.items.default&&(t=JSON.parse(Nt(this.schema.items.default))),e.push(t),this.value=[].concat(zt(e))},removeElement:function(e){this.value.splice(e,1)},moveElementDown:function(e){var t=e+1;t>=this.value.length&&(t=0),this.value.splice(t,0,this.value.splice(e,1)[0])},moveElementUp:function(e){var t=e-1;t<0&&(t=this.value.length),this.value.splice(t,0,this.value.splice(e,1)[0])},getFieldType:function(e){return"field-"+e.type},modelUpdated:function(){},validate:function(e){var t=this;this.clearValidationErrors();var n=this.formOptions.validateAsync||!1,o=[];r(this.$children,function(e){e.validate&&"function"==typeof e.validate&&o.push(e.validate(!0))});var i=function(n){var o=[],i="["+(t.schema.label?t.schema.label:t.schema.name)+"] ";r(n,function(e){Array.isArray(e)&&e.length>0?r(e,function(e){o.push(i+e)}):"string"==typeof e&&o.push(i+e)}),t.schema.onValidated&&"function"==typeof t.schema.onValidated&&t.schema.onValidated.call(t,t.model,o,t.schema);var a=0==o.length;return e||t.$emit("validated",a,o,t),t.errors=o,o};return n?At.all(o).then(i):i(o)}}},Qt={FieldArray:Kt,install:function(e){e.component("field-array",Kt)}},Xt=Object.freeze({default:Qt,FieldArray:Kt});"undefined"!=typeof window&&window.Vue&&window.Vue.use(Qt),e.default=Xt,Object.defineProperty(e,"__esModule",{value:!0})});
